{"version":3,"sources":["index.js"],"names":["DetectIsIE","ua","window","navigator","userAgent","msie","indexOf","parseInt","substring","trident","rv","edge","checkserAgent","userAgentInfo","flag","Array","$","attr","each","index","el","$this","this","video","find","$playBtn","$progress","$progressBar","children","$soundBtn","$centerBtn","$loading","click","addClass","paused","play","pause","removeClass","toggleClass","ontimeupdate","now","currentTime","duration","css","ended","onloadedmetadata","mousedown","event","setTime","x","pageX","left","scale","width","offset","document","mousemove","mouseup","hasClass","unbind","onwaiting","show","onplaying","hide","setMutedStyle","argument","muted","setHeight","h","$left","height","innerWidth","$wrap","$right","$twitter","$middle","onresize"],"mappings":"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","file":"index.min.js","sourcesContent":["//判斷是否為IE\r\nfunction DetectIsIE() {\r\n    var ua = window.navigator.userAgent;\r\n\r\n    var msie = ua.indexOf('MSIE ');\r\n    if (msie > 0) {\r\n        // 回傳版本 <=10 的版本\r\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n    }\r\n\r\n    var trident = ua.indexOf('Trident/');\r\n    if (trident > 0) {\r\n        // 回傳版本 >=11 的版本\r\n        var rv = ua.indexOf('rv:');\r\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n    }\r\n\r\n    var edge = ua.indexOf('Edge/');\r\n    if (edge > 0) {\r\n        // 判斷Edge\r\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n    }\r\n\r\n    // other browser\r\n    return false;\r\n}\r\n\r\n// 判斷是否使用手機瀏覽\r\nfunction checkserAgent() {\r\n    var userAgentInfo = navigator.userAgent;\r\n    var userAgentKeywords = new Array(\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPad\", \"iPod\", \"MQQBrowser\");\r\n    var flag = false;\r\n    if (userAgentInfo.indexOf(\"Windows NT\") == -1) { flag = true; }\r\n    return flag;\r\n}\r\n// 切換成手機用影片\r\nif (checkserAgent()) {\r\n\t$('video').attr('src', 'src/forMobile.mp4');\r\n}\r\n\r\n// video\r\n$('.videoWrap').each(function(index, el) {\r\n\tvar $this = $(this),\r\n\t\tvideo = $this.find('video')[0],\r\n\t    $playBtn = $this.find('.playBtn'),\r\n\t    $progress = $this.find('.progress'),\r\n\t    $progressBar = $progress.children('.bar'),\r\n\t    $soundBtn = $this.find('.soundBtn'),\r\n\t    $centerBtn = $this.find('.centerBtn'),\r\n\t    $loading = $this.find('.loading');\r\n\t    \r\n\t// 按下播放鍵時\r\n\t$(this).find('video,.centerBtn,.playBtn').click(function() {\r\n\t\t$this.addClass('played');\r\n\r\n\t\t// 設定影片播放狀態\r\n\t\tif (video.paused) {\r\n\t\t    video.play();\r\n\t\t    $(video).addClass('playing');\r\n\t\t}\r\n\t\telse {\r\n\t\t    video.pause();\r\n\t\t    $(video).removeClass('playing');\r\n\t\t}\r\n\r\n\t\t// 改變播放鍵樣式\r\n\t\t$playBtn.toggleClass('pause');\r\n\t\t$centerBtn.toggleClass('pause');\r\n\t});\r\n\r\n\t// 播放時間更新時\r\n\tvideo.ontimeupdate=function(){\r\n\t\t// 依據播放時間改變進度條樣式\r\n\t\tvar now = this.currentTime / this.duration * 100;\r\n\t\t$progressBar.css('width', now + '%');\r\n\r\n\t\t// 影片結束\r\n\t\tif (this.ended) {\r\n\t\t    $(this).removeClass('playing');\r\n\t\t    $playBtn.removeClass('pause');\r\n\t\t    $centerBtn.removeClass('pause');\r\n\t\t\t\r\n\t\t    // 返回影片開頭\r\n\t\t\tvideo.pause();\r\n\t\t    video.currentTime=0;\r\n\t\t}\r\n\t};\r\n\r\n\t// 影片載入後\r\n\tvideo.onloadedmetadata=function(){\r\n\t\t// 按下並拖動進度條\r\n\t\t$progress.mousedown(function(event) {\r\n\t\t\tvar left = $(this).offset().left;\r\n\r\n\t\t\t// 設定影片播放時間\r\n\t\t\tfunction setTime(event) {\r\n\t\t\t\tvar x = event.pageX - left; // 減去進度條與視窗的X距離，取得滑鼠相對於進度條點擊的位置\r\n\t\t\t\tvar scale = x / $progress.width(); // 計算點擊位置與進度條總寬度的比例\r\n\t\t\t\tvideo.currentTime = video.duration * scale; // 設定新的影片播放時間(影片長度*比例)\r\n\t\t\t}\r\n\r\n\t\t\t// 拖動前暫停影片並改變播放鍵樣式\r\n\t\t\tvideo.pause();\r\n\t\t\t$playBtn.removeClass('pause');\r\n\r\n\t\t\tsetTime(event);\r\n\r\n\t\t\t$(document).mousemove(function(event) {\r\n\t\t\t\tsetTime(event);\r\n\t\t\t})\r\n\t\t\t// 鬆開滑鼠\r\n\t\t\t.mouseup(function() {\r\n\t\t\t\t// 播放影片並改變播放鍵樣式\r\n\t\t\t\tif ($('video').hasClass('playing')) {\r\n\t\t\t\t  video.play();\r\n\t\t\t\t  $playBtn.addClass('pause');\r\n\t\t\t\t}\r\n\t\t\t\t// 移除事件\r\n\t\t\t\t$(this).unbind('mousemove mouseup');\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\t// 影片緩衝時顯示Loading圖片\r\n\tvideo.onwaiting=function(){\r\n\t\t$loading.show();\r\n\t};\r\n\r\n\t// 影片緩衝結束時隱藏Loading圖片\r\n\tvideo.onplaying=function(){\r\n\t\t$loading.hide();\r\n\t};\r\n\r\n\t// 按下靜音鍵\r\n\t$soundBtn.click(function() {\r\n\t  // 設定靜音鍵樣式\r\n\t  function setMutedStyle(argument) {\r\n\t    if (argument) {\r\n\t      $soundBtn.removeClass('fa-volume-up').addClass('fa-volume-off');\r\n\t    } else {\r\n\t      $soundBtn.removeClass('fa-volume-off').addClass('fa-volume-up');\r\n\t    }\r\n\t  }\r\n\r\n\t  // 設定影片靜音狀態\r\n\t  if (video.muted) {\r\n\t    video.muted = false;\r\n\t    setMutedStyle(false);\r\n\t  } else {\r\n\t    video.muted = true;\r\n\t    setMutedStyle(true);\r\n\t  }\r\n\t});\r\n\r\n\t// 針對IE改變video呈現方式(因IE不支援preload屬性)\r\n\tif (DetectIsIE() !== false) {\r\n\t    $(video).attr('poster', 'build/images/poster1.png');\r\n\t    $(this).addClass('played');\r\n\t}\r\n});\r\n\r\n// 當瀏覽器寬度改變時，將#middle底下.wrap的高度設定成和底下.left的高度相同\r\n(function(){\r\n\tvar $middle=$('#middle'),\r\n\t\t$wrap=$middle.find('.wrap'),\r\n\t\t$left=$middle.find('.left'),\r\n\t\t$right=$middle.find('.right'),\r\n\t\t$twitter=$('#twitter .fa');\r\n\r\n\tfunction setHeight() {\r\n\t\tvar h=$left.height();\r\n\t\tif(this.innerWidth>=768){\r\n\t\t\t$wrap.height(h);\r\n\t\t\t$right.height('inherit');\r\n\t\t\t$twitter.css('line-height', h+'px');\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$wrap.height('auto');\r\n\t\t\t$right.height(h);\r\n\t\t}\r\n\t}\r\n\r\n\twindow.onresize=setHeight;\r\n\tsetHeight();\r\n})();"]}